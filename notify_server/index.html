<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSE handler</title>
</head>
<body>

    <h1>Server Sent Events</h1>

    <script lang="javascript">
        let token = 'eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTk4MTc5NzUsImV4cCI6MTcyMDQyMjc3NSwibmJmIjoxNzE5ODE3OTc1LCJpc3MiOiJjaGF0X3NlcnZlciIsImF1ZCI6ImNoYXRfd2ViIiwiaWQiOjEsIndzX2lkIjoxLCJmdWxsbmFtZSI6IlR5ciBDaGVuIiwiZW1haWwiOiJ0Y2hlbkBhY21lLm9yZyIsImNyZWF0ZWRfYXQiOiIyMDI0LTA3LTAxVDA3OjEyOjUyLjcwMjIzMVoifQ.60sUFPmuTv94Ksc4ENOkAgsqFkzL0lPnmq_CtuaTLNpjdtY48HxaaJlavzcy5iDe9zFbpApvkzyJRgLWhzrcCg';
        var source = new EventSource(`/events?access_token=${token}`)
        source.onmessage = function(event) {
            console.log("Got:", event.data);
        };

        source.addEventListener("NewChat", function(event) {
            console.log("NewChat", event.data);
        });

        source.addEventListener("AddToChat", function(event) {
            console.log("AddToChat", event.data);
        });

        source.addEventListener("RemoveFromChat", function(event) {
            console.log("RemoveFromChat", event.data);
        });

        source.addEventListener("NewMessage", function(event) {
            console.log("NewMessage", event.data);
        });

    </script>
</body>
</html>
